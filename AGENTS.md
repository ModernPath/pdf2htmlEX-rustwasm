# ModernPath Transformation Guide

> **Generated by ModernPath CLI** on 2026-02-18 16:28:47

This project is a **transformation initiative** to modernize legacy code.

## Context

- **Initiative**: Transform: pdf2htmlEX → Oxidized Document Engine (ODE) (ID: 11)
- **Source Architecture**: Source Architecture 37 (ID: 37)
- **Target Architecture**: Target Architecture 40 (ID: 40)
- **Transform Items**: 74 files selected for transformation

## Target Architecture: Oxidized Document Engine (ODE)

The target is a Rust workspace with multiple crates and frontend packages. Code should be written into this structure:

```
crates/
  ode-core/src/           # Core conversion engine (PDF parsing, rendering, fonts)
    lib.rs                # Entry: convert_pdf(data, options) -> Result<OutputBundle, OdeError>
    parser/               # PDF tree traversal (replaces Poppler)
    renderer/             # HTML/SVG generation (replaces HTMLRenderer)
    render/
      state.rs            # Graphics state tracking (CTM, clipping, colors)
      background.rs       # Background layer generation (replaces Cairo/Splash)
    fonts/                # Font extraction & WOFF2 (replaces FontForge wrapper)
  ode-api/src/            # Axum REST API
    main.rs               # Server bootstrap
    routes/               # POST /v1/convert, GET /v1/status/:id, GET /v1/documents/:id
    models/               # Request/response schemas
  ode-worker/src/         # Async Redis job consumer
    main.rs               # Worker loop
    processor.rs          # Conversion orchestration
    storage.rs            # S3 integration
  ode-wasm/src/           # WebAssembly wrapper
    lib.rs                # wasm-bindgen entry point
packages/
  ode-viewer/src/         # React document viewer
    components/           # DocumentViewer.tsx
    hooks/                # useConversion.ts
```

### Key Dependency Replacements

| Legacy C/C++ Dependency | Rust Replacement | Purpose |
|------------------------|------------------|---------|
| Poppler | `lopdf` or `pdf-rs` | PDF parsing and page tree traversal |
| FontForge (`ffw.c`) | `ttf-parser`, `font-kit`, `woff2` | Font extraction, subsetting, web format conversion |
| Cairo | `resvg` | SVG vector rendering |
| Splash | `tiny-skia` | Raster/bitmap rendering |
| getopt_long | `clap` | CLI argument parsing (for dev/testing CLI) |
| Manual C++ memory | Rust ownership/RAII | Memory safety by default |

### Transformation Priority (Phase 1 — Core Engine)

Work on these in order, as each builds on the previous:

1. **PDF parsing foundation** — `ode-core/src/parser/` (from `pdf2htmlEX.cc`, `Preprocessor.cc`)
2. **Graphics state machine** — `ode-core/src/render/state.rs` (from `HTMLRenderer/state.cc`, `HTMLState.h`, `StateManager.h`)
3. **Text extraction & positioning** — `ode-core/src/renderer/` (from `HTMLRenderer/text.cc`, `HTMLTextLine.cc`, `HTMLTextPage.cc`)
4. **Font processing** — `ode-core/src/fonts/` (from `HTMLRenderer/font.cc`, `util/ffw.c`)
5. **Background rendering** — `ode-core/src/render/background.rs` (from `BackgroundRenderer/`)
6. **HTML/CSS output** — `ode-core/src/renderer/` (from `HTMLRenderer/general.cc`, `HTMLRenderer/link.cc`, `HTMLRenderer/form.cc`)
7. **Utilities** — (from `util/encoding.cc`, `util/math.cc`, `util/unicode.cc`, `util/path.cc`, etc.)

### Source File → Target Crate Mapping

| Legacy Source | Target Location | Notes |
|--------------|----------------|-------|
| `src/pdf2htmlEX.cc` | `ode-core/src/lib.rs` + `ode-api/` | Main orchestration splits into library API and web service |
| `src/HTMLRenderer/*.cc` | `ode-core/src/renderer/` | Core text/state/draw/link/form/image logic |
| `src/HTMLRenderer/HTMLRenderer.h` | `ode-core/src/renderer/mod.rs` | Central renderer trait/struct definitions |
| `src/HTMLRenderer/state.cc` | `ode-core/src/render/state.rs` | Graphics state tracking struct |
| `src/HTMLRenderer/font.cc` | `ode-core/src/fonts/` | Font extraction and embedding |
| `src/HTMLRenderer/text.cc` | `ode-core/src/renderer/text.rs` | Text string parsing, character positioning |
| `src/HTMLTextLine.cc/.h` | `ode-core/src/renderer/text_line.rs` | Line-level HTML generation |
| `src/HTMLTextPage.cc/.h` | `ode-core/src/renderer/text_page.rs` | Page-level text aggregation |
| `src/BackgroundRenderer/` | `ode-core/src/render/background.rs` | SVG/raster background rendering |
| `src/Preprocessor.cc/.h` | `ode-core/src/parser/preprocessor.rs` | Font usage scanning, page dimension collection |
| `src/StateManager.h` | `ode-core/src/renderer/style_manager.rs` | CSS class deduplication and generation |
| `src/Param.h` | `ode-core/src/config.rs` | Configuration struct (serde-compatible) |
| `src/Color.cc/.h` | `ode-core/src/types/color.rs` | RGB color representation |
| `src/DrawingTracer.cc/.h` | `ode-core/src/render/drawing_tracer.rs` | Drawing operation interception for occlusion |
| `src/CoveredTextDetector.cc/.h` | `ode-core/src/render/covered_text.rs` | Text visibility/occlusion detection |
| `src/Base64Stream.cc/.h` | Use `base64` crate | Standard Rust crate, no custom implementation |
| `src/StringFormatter.cc/.h` | Use `format!()` macro | Rust built-in formatting |
| `src/TmpFiles.cc/.h` | Use `tempfile` crate | Standard Rust temp file management |
| `src/ArgParser.cc/.h` | Use `clap` crate | Standard Rust CLI parsing |
| `src/util/encoding.cc` | `ode-core/src/util/encoding.rs` | HTML/JSON escaping, UTF-8 handling |
| `src/util/math.cc` | `ode-core/src/util/math.rs` | Affine transforms, bounding boxes |
| `src/util/unicode.cc` | `ode-core/src/util/unicode.rs` | PUA mapping, emoji conflict avoidance |
| `src/util/ffw.c` | `ode-core/src/fonts/processor.rs` | Replace FontForge FFI with native Rust |
| `src/util/const.cc` | `ode-core/src/constants.rs` | Font name maps, MIME types, embed strategies |
| `src/util/path.cc` | Use `std::path::Path` + `std::fs` | Rust stdlib path handling |
| `src/util/mingw.cc` | Not needed | Rust handles cross-platform natively |
| `src/util/SignalHandler.cc` | Not needed | Rust panics + `std::process::exit` |
| `src/util/namespace.h` | Not needed | Rust `use` statements |
| `3rdparty/PDF.js/compatibility.*` | Not needed | Modern browsers don't need classList polyfill |
| `test/` | `ode-core/tests/` + Playwright | Rust integration tests + visual regression |

## Local Resources

All resources needed for transformation have been synced locally.

### Source Code (.modernpath/source/)

The following legacy files have been synced for transformation:

| File | Language | Lines | Purpose |
|------|----------|-------|---------|
| 3rdparty/PDF.js/compatibility.js | javascript | 81 | To provide a readable implementation of the classList polyfill for older browser compatibility. |
| 3rdparty/PDF.js/compatibility.min.js | javascript | 8 | To polyfill the HTMLElement.classList property for browsers that do not support it natively. |
| src/ArgParser.cc | text | 177 | Encapsulates the logic for parsing command-line arguments, mapping them to specific variables or callback functions within the application. |
| src/ArgParser.h | c | 220 | To provide a type-safe, extensible mechanism for parsing command-line arguments and generating usage help text. |
| src/BackgroundRenderer/BackgroundRenderer.cc | text | 131 | To implement renderer instantiation logic and text proofing utilities. |
| src/BackgroundRenderer/BackgroundRenderer.h | c | 53 | To define the interface and factory logic for pluggable background rendering strategies. |
| src/BackgroundRenderer/CairoBackgroundRenderer.cc | text | 311 | To render PDF page backgrounds into SVG files and manage embedded bitmap resources. |
| src/BackgroundRenderer/CairoBackgroundRenderer.h | c | 76 | To provide a Cairo-based backend for rendering complex PDF backgrounds as vector graphics. |
| src/BackgroundRenderer/SplashBackgroundRenderer.cc | text | 177 | To render PDF page backgrounds into raster images (PNG/JPG) and embed them into the HTML output. |
| src/BackgroundRenderer/SplashBackgroundRenderer.h | c | 65 | To provide a Splash-based backend for rendering complex PDF backgrounds as raster images. |
| src/Base64Stream.cc | text | 43 | To convert binary data streams into Base64 encoded strings. |
| src/Base64Stream.h | c | 35 | To encode binary data streams into Base64 format for output. |
| src/Color.cc | text | 52 | To represent and manipulate color data, bridging the application's internal logic with external PDF graphics primitives. |
| src/Color.h | c | 39 | Provides a standardized structure for handling color data, including RGB values and transparency, throughout the PDF to HTML conversion process. |
| src/CoveredTextDetector.cc | text | 119 | To determine if text characters are covered or obscured by other graphical elements in a PDF rendering process. |
| src/CoveredTextDetector.h | c | 69 | To detect and flag text characters that are visually covered by non-text graphical elements in a PDF page. |
| src/DrawingTracer.cc | text | 448 | To trace and record drawing operations for geometric analysis and text visibility detection. |
| src/DrawingTracer.h | c | 85 | To trace and intercept drawing operations (characters, images, paths) during PDF rendering and notify registered callbacks. |
| src/HTMLRenderer/draw.cc | text | 76 | To translate PDF drawing commands (stroke, fill, clip) into actions performed by the internal tracer or state manager. |
| src/HTMLRenderer/font.cc | text | 1115 | To extract font data from PDF objects and save them as temporary files for embedding in HTML. |
| src/HTMLRenderer/form.cc | text | 77 | To convert PDF form widgets into positioned HTML input and div elements. |
| src/HTMLRenderer/general.cc | text | 613 | To manage the top-level workflow of converting a PDF document into HTML, handling page iteration, background rendering, and file output. |
| src/HTMLRenderer/HTMLRenderer.h | c | 387 | To define the interface and state management for converting PDF documents into HTML representation. |
| src/HTMLRenderer/image.cc | text | 86 | To manage the rendering of PDF image content, handling delegation to the underlying output device and tracing rendering events. |
| src/HTMLRenderer/link.cc | text | 320 | To convert PDF link annotations into interactive HTML elements with accurate positioning and styling. |
| src/HTMLRenderer/state.cc | text | 543 | To track PDF state changes and update the internal renderer state to determine when new HTML elements (lines, spans) are needed. |
| src/HTMLRenderer/text.cc | text | 202 | To parse PDF text strings, calculate character positions and metrics, and append the resulting text data to the HTML output structure. |
| src/HTMLState.h | c | 83 | To define the state structures required for rendering PDF content into HTML. |
| src/HTMLTextLine.cc | text | 737 | To convert PDF line data structures into optimized HTML/CSS markup. |
| src/HTMLTextLine.h | c | 135 | Encapsulates the logic for converting a line of PDF text into an optimized HTML structure, managing text content, positioning, and styling states. |
| src/HTMLTextPage.cc | text | 148 | To implement the conversion and optimization of PDF text structures into HTML output. |
| src/HTMLTextPage.h | c | 67 | To aggregate, optimize, and output text lines for a single PDF page as HTML. |
| src/Param.h | c | 94 | To define the data structure holding all configuration parameters for the PDF conversion process. |
| src/pdf2htmlEX.cc | text | 475 | Provides the main application entry point, parses command-line arguments, configures global parameters, and initiates the PDF to HTML conversion process. |
| src/Preprocessor.cc | text | 110 | To scan PDF documents and map font usage to specific character codes for optimization purposes. |
| src/Preprocessor.h | c | 67 | To perform a preliminary scan of PDF documents to collect metadata (font usage, dimensions, links) required for the rendering process. |
| src/StateManager.h | c | 442 | Centralizes the management of CSS style states, ensuring unique class generation for distinct property values to optimize the final HTML/CSS output. |
| src/StringFormatter.cc | text | 31 | To format strings into a dynamically sized internal buffer using printf-style syntax. |
| src/StringFormatter.h | c | 44 | To efficiently format strings using a reusable buffer. |
| src/TmpFiles.cc | text | 78 | To provide the implementation logic for tracking, calculating size, and deleting temporary files. |
| src/TmpFiles.h | c | 29 | To track and manage the cleanup of temporary files created during the application process. |
| src/util/const.cc | text | 54 | To define global constant mappings for font names, embedding strategies, and MIME types. |
| src/util/const.h | c | 47 | To centralize global constants, mappings, and configuration structures used throughout the PDF to HTML conversion process. |
| src/util/encoding.cc | text | 195 | Handles text encoding (UTF-8) and escaping for HTML, JSON, and attribute output. |
| src/util/encoding.h | c | 44 | To declare utility functions for text encoding and escaping in various output formats. |
| src/util/ffw.c | c | 580 | To implement the FontForge wrapper functionality for font processing tasks. |
| src/util/ffw.h | c | 80 | To declare a C API for wrapping FontForge functionality for font processing. |
| src/util/math.cc | text | 91 | To perform affine transformations and bounding box calculations for the rendering pipeline. |
| src/util/math.h | c | 60 | To centralize mathematical logic for tolerance-based comparisons and matrix transformations. |
| src/util/mingw.cc | text | 65 | Provides Windows/MinGW-specific implementations for file system and path utilities. |
| src/util/mingw.h | c | 30 | To ensure cross-platform compatibility by abstracting Windows-specific file system behaviors. |
| src/util/misc.cc | text | 67 | Provides miscellaneous helper functions for CSS geometry calculations and color formatting. |
| src/util/misc.h | c | 40 | To provide miscellaneous helper functions for PDF reference hashing, CSS border adjustment, and color output formatting. |
| src/util/namespace.h | c | 22 | To import standard C++ library symbols into the current namespace to reduce verbosity in other source files. |
| src/util/path.cc | text | 142 | To provide helper functions for file path manipulation, directory creation, and filename sanitization. |
| src/util/path.h | c | 34 | Provides utility functions for file path manipulation, directory creation, and filename sanitization. |
| src/util/SignalHandler.cc | text | 257 | To handle fatal application signals by logging diagnostic details and exiting gracefully. |
| src/util/SignalHandler.h | c | 22 | Manages system signal handling and application lifecycle actions. |
| src/util/unicode.cc | text | 73 | To map PDF character codes to safe Unicode values, avoiding conflicts with system fonts like emoji. |
| src/util/unicode.h | c | 92 | To validate and transform Unicode characters from PDF sources into safe HTML-compatible representations. |
| test/browser_tests/basic_text/basic_text.html | html | 108 | To provide a test fixture for validating the HTML and CSS output of basic text rendering from PDF conversion. |
| test/browser_tests/fontfile3_opentype/fontfile3_opentype.html | html | 161 | To validate the correct rendering of OpenType fonts converted from PDF to HTML. |
| test/browser_tests/geneve_1564/geneve_1564.html | html | 739 | To provide a test fixture for validating PDF to HTML conversion for a specific document containing custom fonts. |
| test/browser_tests/invalid_unicode_issue477/invalid_unicode_issue477.html | html | 159 | To verify that the rendering engine correctly handles and displays invalid Unicode characters. |
| test/browser_tests.py | python | 138 | To perform visual regression testing by comparing rendered HTML output against known good reference images. |
| test/browser_tests/svg_background_with_page_rotation_issue402/svg_background_with_page_rotation_issue402.html | html | 643 | To test and validate the rendering of SVG backgrounds and page rotation in converted PDF documents. |
| test/browser_tests/text_visibility/text_visibility.html | html | 154 | To provide a visual reference for testing the visibility and clipping of text elements in the HTML rendering engine. |
| test/browser_tests/with_form/with_form.html | html | 217 | To validate the correct rendering and positioning of form elements converted from PDF. |
| test/fancy.min.css | css | 5 | To enforce specific layout constraints on the page container during visual testing. |
| test/old/test.py | python | 25 | To batch convert PDF files to HTML and generate an index page for manual verification of the conversion results. |
| test/README.md | markdown | 125 | To document the testing procedures, dependencies, and tools required to verify the correctness of PDF to HTML conversion. |
| test/test_local_browser.py | python | 50 | To execute visual regression tests using a local Firefox browser instance. |
| test/test_output.py | python | 102 | To validate the file generation and naming logic of the pdf2htmlEX conversion process. |
| test/test_remote_browser.py | python | 139 | To orchestrate and execute PDF rendering tests across multiple remote browser environments via Sauce Labs. |

**Usage**: Read these files directly from `.modernpath/source/` to understand the legacy implementation.

### Source Architecture Documentation (.modernpath/source_docs/)

Documentation for the **source/legacy** system you're modernizing:
| Document | Tier | Angle | Summary |
|----------|------|-------|---------|
| [Architecture Patterns](.modernpath/source_docs/other/Architecture-Patterns.md) | instructions | architecture | Architectural patterns and design principles for pdf2htmlEX pdf2htmlEX |
| [Code Style Patterns](.modernpath/source_docs/other/Code-Style-Patterns.md) | instructions | style | Code style and formatting patterns for pdf2htmlEX pdf2htmlEX |
| [File Organization Rules](.modernpath/source_docs/other/File-Organization-Rules.md) | instructions | patterns | File and directory organization rules for pdf2htmlEX pdf2htmlEX |
| [Language Conventions: cpp](.modernpath/source_docs/other/Language-Conventions-cpp.md) | instructions | conventions | Language-specific coding conventions for cpp in pdf2htmlEX pdf2htmlEX |
| [Testing Conventions](.modernpath/source_docs/other/Testing-Conventions.md) | instructions | testing | Testing patterns and conventions for pdf2htmlEX pdf2htmlEX |
| [Code Structure: pdf2htmlEX pdf2htmlEX](.modernpath/source_docs/architecture/Code-Structure-pdf2htmlEX-pdf2htmlEX.md) | architecture | code_structure | # Code Structure Documentation: pdf2htmlEX pdf2htmlEX |
| [Data Models: pdf2htmlEX pdf2htmlEX](.modernpath/source_docs/architecture/Data-Models-pdf2htmlEX-pdf2htmlEX.md) | architecture | data_models | # Data Models Documentation: pdf2htmlEX |
| [Interfaces: pdf2htmlEX pdf2htmlEX](.modernpath/source_docs/architecture/Interfaces-pdf2htmlEX-pdf2htmlEX.md) | architecture | interfaces | # Interfaces Documentation for pdf2htmlEX |
| [Overview: pdf2htmlEX pdf2htmlEX](.modernpath/source_docs/architecture/Overview-pdf2htmlEX-pdf2htmlEX.md) | architecture | overview | # Architecture Overview: pdf2htmlEX |
| [Use Cases: pdf2htmlEX pdf2htmlEX](.modernpath/source_docs/architecture/Use-Cases-pdf2htmlEX-pdf2htmlEX.md) | architecture | use_cases | # Use Cases Documentation: pdf2htmlEX pdf2htmlEX |
| [Code Structure: Background Rendering Engine](.modernpath/source_docs/subsystem/Code-Structure-Background-Rendering-Engine.md) | subsystem | code_structure | # Code Structure Documentation: Background Rendering Engine |
| [Code Structure: Core Utilities](.modernpath/source_docs/subsystem/Code-Structure-Core-Utilities.md) | subsystem | code_structure | # Core Utilities: Code Structure Documentation |
| [Code Structure: External Dependencies](.modernpath/source_docs/subsystem/Code-Structure-External-Dependencies.md) | subsystem | code_structure | # External Dependencies: Code Structure Documentation |
| [Code Structure: HTML Rendering Engine](.modernpath/source_docs/subsystem/Code-Structure-HTML-Rendering-Engine.md) | subsystem | code_structure | # HTML Rendering Engine: Code Structure Documentation |
| [Code Structure: Main Application Logic](.modernpath/source_docs/subsystem/Code-Structure-Main-Application-Logic.md) | subsystem | code_structure | # Code Structure Documentation: Main Application Logic |
| [Code Structure: Other](.modernpath/source_docs/subsystem/Code-Structure-Other.md) | subsystem | code_structure | # Code Structure Documentation: Other |
| [Data Models: Background Rendering Engine](.modernpath/source_docs/subsystem/Data-Models-Background-Rendering-Engine.md) | subsystem | data_models | # Data Models Documentation: Background Rendering Engine |
| [Data Models: Core Utilities](.modernpath/source_docs/subsystem/Data-Models-Core-Utilities.md) | subsystem | data_models | # Data Models Documentation: Core Utilities |
| [Data Models: External Dependencies](.modernpath/source_docs/subsystem/Data-Models-External-Dependencies.md) | subsystem | data_models | # External Dependencies: Data Models Documentation |
| [Data Models: HTML Rendering Engine](.modernpath/source_docs/subsystem/Data-Models-HTML-Rendering-Engine.md) | subsystem | data_models | # HTML Rendering Engine - Data Models Documentation |
| [Data Models: Main Application Logic](.modernpath/source_docs/subsystem/Data-Models-Main-Application-Logic.md) | subsystem | data_models | # Data Models Documentation: Main Application Logic |
| [Data Models: Other](.modernpath/source_docs/subsystem/Data-Models-Other.md) | subsystem | data_models | # Data Models Documentation: Other |
| [Interfaces: Background Rendering Engine](.modernpath/source_docs/subsystem/Interfaces-Background-Rendering-Engine.md) | subsystem | interfaces | # Background Rendering Engine: Interfaces Documentation |
| [Interfaces: Core Utilities](.modernpath/source_docs/subsystem/Interfaces-Core-Utilities.md) | subsystem | interfaces | # Core Utilities: Interfaces Documentation |
| [Interfaces: External Dependencies](.modernpath/source_docs/subsystem/Interfaces-External-Dependencies.md) | subsystem | interfaces | # External Dependencies: Interfaces Documentation |
| [Interfaces: HTML Rendering Engine](.modernpath/source_docs/subsystem/Interfaces-HTML-Rendering-Engine.md) | subsystem | interfaces | # HTML Rendering Engine: Interfaces Documentation |
| [Interfaces: Main Application Logic](.modernpath/source_docs/subsystem/Interfaces-Main-Application-Logic.md) | subsystem | interfaces | # Main Application Logic: Interfaces Documentation |
| [Interfaces: Other](.modernpath/source_docs/subsystem/Interfaces-Other.md) | subsystem | interfaces | # Other Subsystem - Interfaces Documentation |
| [Overview: Background Rendering Engine](.modernpath/source_docs/subsystem/Overview-Background-Rendering-Engine.md) | subsystem | overview | # Background Rendering Engine: Executive Summary |
| [Overview: Core Utilities](.modernpath/source_docs/subsystem/Overview-Core-Utilities.md) | subsystem | overview | # Core Utilities Subsystem Overview |
| [Overview: External Dependencies](.modernpath/source_docs/subsystem/Overview-External-Dependencies.md) | subsystem | overview | # External Dependencies: Overview |
| [Overview: HTML Rendering Engine](.modernpath/source_docs/subsystem/Overview-HTML-Rendering-Engine.md) | subsystem | overview | # HTML Rendering Engine: Executive Overview |
| [Overview: Main Application Logic](.modernpath/source_docs/subsystem/Overview-Main-Application-Logic.md) | subsystem | overview | # Main Application Logic: Executive Summary |
| [Overview: Other](.modernpath/source_docs/subsystem/Overview-Other.md) | subsystem | overview | # Subsystem Overview: Other |
| [Use Cases: Background Rendering Engine](.modernpath/source_docs/subsystem/Use-Cases-Background-Rendering-Engine.md) | subsystem | use_cases | # Use Cases Documentation: Background Rendering Engine |
| [Use Cases: Core Utilities](.modernpath/source_docs/subsystem/Use-Cases-Core-Utilities.md) | subsystem | use_cases | # Use Cases Documentation: Core Utilities |
| [Use Cases: External Dependencies](.modernpath/source_docs/subsystem/Use-Cases-External-Dependencies.md) | subsystem | use_cases | # Use Cases Documentation: External Dependencies |
| [Use Cases: HTML Rendering Engine](.modernpath/source_docs/subsystem/Use-Cases-HTML-Rendering-Engine.md) | subsystem | use_cases | # Use Cases Documentation: HTML Rendering Engine |
| [Use Cases: Main Application Logic](.modernpath/source_docs/subsystem/Use-Cases-Main-Application-Logic.md) | subsystem | use_cases | # Use Cases Documentation: Main Application Logic |
| [Use Cases: Other](.modernpath/source_docs/subsystem/Use-Cases-Other.md) | subsystem | use_cases | # Use Cases Documentation: Subsystem Other |
| [Code Structure: src](.modernpath/source_docs/module/Code-Structure-src.md) | module | code_structure | # Code Structure Documentation: `src` |
| [Code Structure: src/BackgroundRenderer](.modernpath/source_docs/module/Code-Structure-srcBackgroundRenderer.md) | module | code_structure | # Code Structure Documentation: `src/BackgroundRenderer` |
| [Code Structure: src/HTMLRenderer](.modernpath/source_docs/module/Code-Structure-srcHTMLRenderer.md) | module | code_structure | # Code Structure Documentation: `src/HTMLRenderer` |
| [Code Structure: src/util](.modernpath/source_docs/module/Code-Structure-srcutil.md) | module | code_structure | # Code Structure Documentation: `src/util` |
| [Code Structure: test](.modernpath/source_docs/module/Code-Structure-test.md) | module | code_structure | # Code Structure Documentation: `test` |
| [Data Models: src](.modernpath/source_docs/module/Data-Models-src.md) | module | data_models | # Data Models Documentation |
| [Data Models: src/BackgroundRenderer](.modernpath/source_docs/module/Data-Models-srcBackgroundRenderer.md) | module | data_models | # Data Models Documentation |
| [Data Models: src/HTMLRenderer](.modernpath/source_docs/module/Data-Models-srcHTMLRenderer.md) | module | data_models | # Data Models Documentation |
| [Data Models: src/util](.modernpath/source_docs/module/Data-Models-srcutil.md) | module | data_models | # Data Models Documentation |
| [Data Models: test](.modernpath/source_docs/module/Data-Models-test.md) | module | data_models | # Data Models Documentation: `test` |
| [Interfaces: src](.modernpath/source_docs/module/Interfaces-src.md) | module | interfaces | # Interfaces Documentation: `src` |
| [Interfaces: src/BackgroundRenderer](.modernpath/source_docs/module/Interfaces-srcBackgroundRenderer.md) | module | interfaces | # Interfaces Documentation: `src/BackgroundRenderer` |
| [Interfaces: src/HTMLRenderer](.modernpath/source_docs/module/Interfaces-srcHTMLRenderer.md) | module | interfaces | # Interfaces Documentation: src/HTMLRenderer |
| [Interfaces: src/util](.modernpath/source_docs/module/Interfaces-srcutil.md) | module | interfaces | # Interfaces Documentation: `src/util` |
| [Interfaces: test](.modernpath/source_docs/module/Interfaces-test.md) | module | interfaces | # Interfaces Documentation: test |
| [Overview: src](.modernpath/source_docs/module/Overview-src.md) | module | overview | # Module Overview: src |
| [Overview: src/BackgroundRenderer](.modernpath/source_docs/module/Overview-srcBackgroundRenderer.md) | module | overview | # Background Renderer Module Overview |
| [Overview: src/HTMLRenderer](.modernpath/source_docs/module/Overview-srcHTMLRenderer.md) | module | overview | # Module Overview: HTML Rendering Engine |
| [Overview: src/util](.modernpath/source_docs/module/Overview-srcutil.md) | module | overview | # Module Overview: src/util |
| [Overview: test](.modernpath/source_docs/module/Overview-test.md) | module | overview | # Module Overview: test |
| [Use Cases: src](.modernpath/source_docs/module/Use-Cases-src.md) | module | use_cases | # Use Cases Documentation: `src` |
| [Use Cases: src/BackgroundRenderer](.modernpath/source_docs/module/Use-Cases-srcBackgroundRenderer.md) | module | use_cases | # Use Cases Documentation: BackgroundRenderer Module |
| [Use Cases: src/HTMLRenderer](.modernpath/source_docs/module/Use-Cases-srcHTMLRenderer.md) | module | use_cases | # Use Cases Documentation: HTMLRenderer |
| [Use Cases: src/util](.modernpath/source_docs/module/Use-Cases-srcutil.md) | module | use_cases | # Use Cases Documentation: `src/util` |
| [Use Cases: test](.modernpath/source_docs/module/Use-Cases-test.md) | module | use_cases | # Use Cases Documentation: test |

**Usage**: These docs explain how the legacy system works. Essential reading before transforming each file.

### Target Architecture Documentation (.modernpath/docs/)

Documentation for the **target** system you're building:
No target documentation synced yet. Run `modernpath docs sync` to download.

### Specifications (.modernpath/specs/)

Transformation specifications organized by category:
- `architecture/` - Architecture specifications
- `database/` - Database specifications
- `modernization/` - Modernization specifications
- `requirements/` - Requirements specifications
- `testing/` - Testing specifications

## CLI Tools for Additional Context

When you need information beyond the synced files, use these CLI commands:

### Read Source Files

```bash
# Read any file from the source codebase
modernpath read-file src/other/file.php

# Read specific line range
modernpath read-file src/auth/login.php --start=50 --end=100
```

### Read Documentation

```bash
# Search documentation by title
modernpath read-doc "Authentication"

# List all documentation
modernpath read-doc --list

# Get docs by tier
modernpath read-doc --tier=module

# Get docs by tier and angle
modernpath read-doc --tier=subsystem --angle=architecture
```

### Search and Ask

```bash
# Full-text search across docs and code
modernpath search "how does authentication work"

# Ask questions about the codebase
modernpath ask "What is the data flow for user login?"
```

## Transformation Workflow

For each source file being transformed:

1. **Read the specs** in `.modernpath/specs/` — start with `architecture/system-architecture-overview.md` and `modernization/code-mapping-transformation.md`
2. **Review source docs** in `.modernpath/source_docs/` — check the relevant subsystem overview and interfaces docs (e.g., `subsystem/Overview-HTML-Rendering-Engine.md` for HTMLRenderer files)
3. **Read the legacy source** in `.modernpath/source/` — understand the actual C++ implementation
4. **Check the target mapping** in the "Source File → Target Crate Mapping" table above to determine where the Rust code should go
5. **Use CLI** (`modernpath read-file`, `modernpath search`) for additional context when needed
6. **Write idiomatic Rust** — don't line-by-line port; do a functional rewrite using Rust patterns (traits, enums, Result types, iterators)
7. **Replace C dependencies with Rust crates** — see the dependency replacement table above
8. **Write tests** — property-based tests with `proptest` for math/transforms, integration tests comparing output with legacy

### Rust Conventions for This Project

- Use `thiserror` for error types, `anyhow` for application-level errors
- All public APIs return `Result<T, OdeError>`
- Configuration structs derive `serde::Deserialize` + `serde::Serialize`
- Prefer `&[u8]` and streaming over `Vec<u8>` where possible for memory efficiency
- Use `#[cfg(feature = "...")]` for optional rendering backends
- Target `wasm32-unknown-unknown` compatibility in `ode-core` — avoid platform-specific APIs

## File-by-File Transformation

### compatibility.js

- **Source Path**: `.modernpath/source/3rdparty/PDF.js/compatibility.js`
- **Language**: javascript
- **Lines**: 81
- **Purpose**: To provide a readable implementation of the classList polyfill for older browser compatibility.
- **Summary**: This file contains the human-readable source code for the `classList` polyfill used in the project. It checks for the existence of the `classList` property on a `div` element; if missing, it defines a property on `HTMLElement.prototype` that returns an object with `add`, `remove`, `contains`, and `toggle` methods. These methods manipulate the element's `className` string by splitting it into an array, modifying the array, and joining it back.

### compatibility.min.js

- **Source Path**: `.modernpath/source/3rdparty/PDF.js/compatibility.min.js`
- **Language**: javascript
- **Lines**: 8
- **Purpose**: To polyfill the HTMLElement.classList property for browsers that do not support it natively.
- **Summary**: This file is a minified JavaScript library that adds support for the `classList` property to HTMLElement prototypes if it is not natively supported by the browser. It implements a custom object with methods like `add`, `contains`, `remove`, and `toggle` to manipulate CSS classes on DOM elements. The code is compressed, likely served to clients to reduce payload size while maintaining functionality for legacy environments.

### ArgParser.cc

- **Source Path**: `.modernpath/source/src/ArgParser.cc`
- **Language**: text
- **Lines**: 177
- **Purpose**: Encapsulates the logic for parsing command-line arguments, mapping them to specific variables or callback functions within the application.
- **Summary**: This file implements the `ArgParser` class, which wraps the standard `getopt_long` library to provide a simplified interface for parsing command-line arguments. It supports registering options with descriptions, callbacks, and argument requirements. The implementation handles the construction of the `optstring` and `longopts` structures required by `getopt_long`, maps option identifiers to argument entries, and processes optional positional arguments. It also includes utility functions for reading values into different types and generating usage information.

### ArgParser.h

- **Source Path**: `.modernpath/source/src/ArgParser.h`
- **Language**: c
- **Lines**: 220
- **Purpose**: To provide a type-safe, extensible mechanism for parsing command-line arguments and generating usage help text.
- **Summary**: This header file defines a wrapper around the getopt library for parsing command-line arguments within the pdf2htmlEX namespace. It provides a fluent interface to register arguments via callbacks or variable references, supporting various data types through templates. The design separates argument definition from parsing logic using a polymorphic base class structure and handles automatic generation of usage help text. It also manages optional positional arguments separately from named options.

### BackgroundRenderer.cc

- **Source Path**: `.modernpath/source/src/BackgroundRenderer/BackgroundRenderer.cc`
- **Language**: text
- **Lines**: 131
- **Purpose**: To implement renderer instantiation logic and text proofing utilities.
- **Summary**: This file implements the static factory methods defined in BackgroundRenderer.h, instantiating specific renderers (Cairo or Splash) based on the requested format string and compile-time feature flags. It also contains the implementation of 'proof' rendering functions, which alter text colors (Red, Green, Blue, Yellow) to visualize fill and stroke modes for debugging purposes. The code handles conditional compilation for features like SVG, PNG, and JPEG support.

### BackgroundRenderer.h

- **Source Path**: `.modernpath/source/src/BackgroundRenderer/BackgroundRenderer.h`
- **Language**: c
- **Lines**: 53
- **Purpose**: To define the interface and factory logic for pluggable background rendering strategies.
- **Summary**: This file establishes the abstract base class BackgroundRenderer, which defines the contract for all background rendering implementations. It includes factory methods (`getBackgroundRenderer`, `getFallbackBackgroundRenderer`) to instantiate the correct renderer based on configuration parameters. The class also declares protected methods for generating 'proof' output, which visualizes text rendering logic. It serves as the central abstraction point decoupling the main application from specific graphics libraries.

### CairoBackgroundRenderer.cc

- **Source Path**: `.modernpath/source/src/BackgroundRenderer/CairoBackgroundRenderer.cc`
- **Language**: text
- **Lines**: 311
- **Purpose**: To render PDF page backgrounds into SVG files and manage embedded bitmap resources.
- **Summary**: This file implements the CairoBackgroundRenderer class, which uses the Cairo library to render PDF pages into SVG format. It manages the creation of SVG surfaces, handles text rendering with specific fallback conditions for complex fonts or modes, and extracts embedded bitmaps (JPEGs) from the PDF to external files to avoid embedding them directly in the SVG. The renderer includes logic to switch to a bitmap renderer if the SVG node count exceeds a configured limit, ensuring performance.

### CairoBackgroundRenderer.h

- **Source Path**: `.modernpath/source/src/BackgroundRenderer/CairoBackgroundRenderer.h`
- **Language**: c
- **Lines**: 76
- **Purpose**: To provide a Cairo-based backend for rendering complex PDF backgrounds as vector graphics.
- **Summary**: This header file declares the CairoBackgroundRenderer class, which inherits from both BackgroundRenderer and CairoOutputDev. It is designed to render PDF elements not supported by the main HTML renderer into vector images using the Cairo graphics library. The class manages bitmap references for embedded images and handles text drawing for proofing purposes. It integrates with the HTMLRenderer to coordinate the overall rendering pipeline.

### SplashBackgroundRenderer.cc

- **Source Path**: `.modernpath/source/src/BackgroundRenderer/SplashBackgroundRenderer.cc`
- **Language**: text
- **Lines**: 177
- **Purpose**: To render PDF page backgrounds into raster images (PNG/JPG) and embed them into the HTML output.
- **Summary**: This file implements the SplashBackgroundRenderer class, which utilizes the Poppler Splash backend to render PDF pages into raster images (PNG or JPEG). It handles initialization of supported image formats based on compilation flags, renders the page content while managing text visibility and annotation processing, and embeds the resulting image into the HTML output either as a base64 data URI or a separate file. The renderer supports specific proof modes and character coverage checks to control rendering fidelity.

### SplashBackgroundRenderer.h

- **Source Path**: `.modernpath/source/src/BackgroundRenderer/SplashBackgroundRenderer.h`
- **Language**: c
- **Lines**: 65
- **Purpose**: To provide a Splash-based backend for rendering complex PDF backgrounds as raster images.
- **Summary**: This header file declares the SplashBackgroundRenderer class, which inherits from BackgroundRenderer and SplashOutputDev. It utilizes the Splash graphics library to render PDF backgrounds into raster bitmap formats. The class supports configurable output formats (PNG, JPG) and handles text drawing and page initialization. It serves as the raster alternative to the vector-based Cairo renderer.

### Base64Stream.cc

- **Source Path**: `.modernpath/source/src/Base64Stream.cc`
- **Language**: text
- **Lines**: 43
- **Purpose**: To convert binary data streams into Base64 encoded strings.
- **Summary**: This file implements a Base64 encoder that reads from an input stream and writes the encoded output to a standard C++ ostream. It processes data in 3-byte chunks, mapping them to 4 Base64 characters, and handles padding for the final chunk if the input size is not a multiple of 3. The implementation uses a static lookup table for the Base64 alphabet.

### Base64Stream.h

- **Source Path**: `.modernpath/source/src/Base64Stream.h`
- **Language**: c
- **Lines**: 35
- **Purpose**: To encode binary data streams into Base64 format for output.
- **Summary**: This file defines a Base64Stream class that wraps a standard input stream to provide Base64 encoding functionality. It allows for the streaming conversion of binary data to Base64 text, which is useful for embedding resources in HTML documents. The class overloads the stream insertion operator to integrate seamlessly with C++ iostream idioms. The implementation relies on a static encoding table to perform the translation.

### Color.cc

- **Source Path**: `.modernpath/source/src/Color.cc`
- **Language**: text
- **Lines**: 52
- **Purpose**: To represent and manipulate color data, bridging the application's internal logic with external PDF graphics primitives.
- **Summary**: This file implements the `Color` class, which encapsulates RGB color values and a transparency flag. It serves as an adapter for external PDF graphics types (GfxRGB, GfxColor), converting between double-precision values and the fixed-point integer types used by the underlying rendering library. The implementation includes constructors for initialization, a distance calculation method for color comparison, and stream output operators for debugging.

### Color.h

- **Source Path**: `.modernpath/source/src/Color.h`
- **Language**: c
- **Lines**: 39
- **Purpose**: Provides a standardized structure for handling color data, including RGB values and transparency, throughout the PDF to HTML conversion process.
- **Summary**: This header file defines a `Color` struct within the `pdf2htmlEX` namespace to represent colors, supporting both RGB values and transparency states. It includes constructors for initialization from RGB components or existing `GfxRGB` objects, and an equality operator that accounts for transparency. The struct provides methods to convert to `GfxColor` and calculate color distance, alongside an overloaded stream operator for output. This utility is essential for maintaining visual fidelity when converting PDF graphics to HTML.

### CoveredTextDetector.cc

- **Source Path**: `.modernpath/source/src/CoveredTextDetector.cc`
- **Language**: text
- **Lines**: 119
- **Purpose**: To determine if text characters are covered or obscured by other graphical elements in a PDF rendering process.
- **Summary**: This file implements a text visibility detection system that tracks character bounding boxes and checks if they are obscured by other graphical elements like strokes or fills. It operates by maintaining a list of character boxes and their corner visibility states, updating these states whenever a non-character element is drawn. The design uses a callback mechanism via function pointers to integrate with a Cairo rendering context, allowing for real-time occlusion checks during the rendering pipeline.

### CoveredTextDetector.h

- **Source Path**: `.modernpath/source/src/CoveredTextDetector.h`
- **Language**: c
- **Lines**: 69
- **Purpose**: To detect and flag text characters that are visually covered by non-text graphical elements in a PDF page.
- **Summary**: This C++ header file defines the `CoveredTextDetector` class, which is a component of the rendering pipeline designed to solve the problem of text visibility in complex PDF layouts. It tracks the bounding boxes of drawn characters and non-character graphics (like images or shapes) in the order they are drawn. By comparing these bounding boxes, it determines if any text characters are fully or partially obscured by subsequent graphics, allowing the renderer to handle them appropriately (e.g., by marking them as covered). The class relies on the Cairo graphics library for coordinate data and uses standard vectors for state management.

### DrawingTracer.cc

- **Source Path**: `.modernpath/source/src/DrawingTracer.cc`
- **Language**: text
- **Lines**: 448
- **Purpose**: To trace and record drawing operations for geometric analysis and text visibility detection.
- **Summary**: This file implements a tracer that intercepts drawing operations from the PDF rendering pipeline and replays them onto a Cairo recording surface. It maintains a stack of transformation matrices (CTM) to accurately map coordinates. The primary goal is to calculate bounding boxes of drawn elements and pass them to callback functions for occlusion detection, specifically ignoring operations with low opacity.

### DrawingTracer.h

- **Source Path**: `.modernpath/source/src/DrawingTracer.h`
- **Language**: c
- **Lines**: 85
- **Purpose**: To trace and intercept drawing operations (characters, images, paths) during PDF rendering and notify registered callbacks.
- **Summary**: DrawingTracer.h defines a class that traces and monitors drawing operations during the PDF rendering process. It provides callback mechanisms for events like character drawing and image rendering, allowing external logic to react to these events. The class integrates with Cairo for graphics operations and manages state transformations, clipping paths, and stroke/fill operations. It serves as a bridge between the low-level PDF drawing commands and higher-level processing or output generation.

### draw.cc

- **Source Path**: `.modernpath/source/src/HTMLRenderer/draw.cc`
- **Language**: text
- **Lines**: 76
- **Purpose**: To translate PDF drawing commands (stroke, fill, clip) into actions performed by the internal tracer or state manager.
- **Summary**: This file implements the drawing primitives for the `HTMLRenderer`, including stroking, filling, and clipping operations. It delegates the actual recording or execution of these drawing commands to a `tracer` object. It also handles transparency groups by tracking depth, ensuring that complex layering in PDFs is managed correctly during the conversion process.

### font.cc

- **Source Path**: `.modernpath/source/src/HTMLRenderer/font.cc`
- **Language**: text
- **Lines**: 1115
- **Purpose**: To extract font data from PDF objects and save them as temporary files for embedding in HTML.
- **Summary**: This file implements methods to dump embedded fonts from PDF documents to the file system. It distinguishes between standard font formats (TTF, OTF, CFF) by inspecting the PDF font descriptor and handles Type 3 fonts by rendering glyphs to SVG using Cairo. The code involves complex coordinate transformations to ensure Type 3 fonts are rendered with the correct metrics and scale.

### form.cc

- **Source Path**: `.modernpath/source/src/HTMLRenderer/form.cc`
- **Language**: text
- **Lines**: 77
- **Purpose**: To convert PDF form widgets into positioned HTML input and div elements.
- **Summary**: This C++ file implements the logic for processing and rendering PDF form fields into HTML elements within the pdf2htmlEX application. It iterates through widgets on a specific PDF page, calculates their dimensions based on zoom parameters, and generates corresponding HTML tags such as input fields and buttons. The code handles text fields and buttons specifically, applying CSS classes and inline styles for absolute positioning to match the original PDF layout. Unrecognized form field types trigger an error message to the standard error stream.

### general.cc

- **Source Path**: `.modernpath/source/src/HTMLRenderer/general.cc`
- **Language**: text
- **Lines**: 613
- **Purpose**: To manage the top-level workflow of converting a PDF document into HTML, handling page iteration, background rendering, and file output.
- **Summary**: This file implements the core orchestration logic for converting PDF documents into HTML format. It handles the main processing loop, iterating through pages, managing DPI scaling, and coordinating with background renderers and text processors. The code integrates external PDF processing libraries (Poppler) and manages output streams for HTML and CSS, including support for splitting pages into separate files. Key design decisions include lazy initialization of renderers, dynamic DPI clamping to prevent excessive memory usage, and the use of a tracer to detect covered text.

### HTMLRenderer.h

- **Source Path**: `.modernpath/source/src/HTMLRenderer/HTMLRenderer.h`
- **Language**: c
- **Lines**: 387
- **Purpose**: To define the interface and state management for converting PDF documents into HTML representation.
- **Summary**: This header defines the `HTMLRenderer` class, which inherits from Poppler's `OutputDev` to intercept PDF rendering commands. It outlines the complete lifecycle of the conversion process, from page start/end to text and image drawing. The class manages complex state tracking, font installation (embedded vs. external), and CSS generation, serving as the central coordinator for the application.

### image.cc

- **Source Path**: `.modernpath/source/src/HTMLRenderer/image.cc`
- **Language**: text
- **Lines**: 86
- **Purpose**: To manage the rendering of PDF image content, handling delegation to the underlying output device and tracing rendering events.
- **Summary**: This file implements image handling methods for the HTMLRenderer class within the pdf2htmlEX namespace. It primarily overrides methods to draw images and soft-masked images, currently delegating the actual rendering to the parent OutputDev class. The code includes commented-out logic that suggests a previous or future implementation where images are extracted to PNG files and embedded as HTML img tags. A tracer object is invoked to record image drawing events for debugging or analysis purposes.

### link.cc

- **Source Path**: `.modernpath/source/src/HTMLRenderer/link.cc`
- **Language**: text
- **Lines**: 320
- **Purpose**: To convert PDF link annotations into interactive HTML elements with accurate positioning and styling.
- **Summary**: This file implements the logic for processing PDF link annotations within the HTMLRenderer. It translates PDF link destinations (internal page jumps or external URIs) into HTML anchor tags while calculating the precise CSS positioning and styling for the link's visual representation (border, color, rectangle). The code handles various PDF link destination types (XYZ, Fit, FitR, etc.) and maps PDF border styles to CSS border styles. It also includes specific fixes for browser compatibility, such as setting a transparent background color for Internet Explorer.

### state.cc

- **Source Path**: `.modernpath/source/src/HTMLRenderer/state.cc`
- **Language**: text
- **Lines**: 543
- **Purpose**: To track PDF state changes and update the internal renderer state to determine when new HTML elements (lines, spans) are needed.
- **Summary**: This file handles the tracking of PDF state changes and updates the internal HTML renderer state accordingly. It implements a series of update methods corresponding to Poppler's state change callbacks, tracking changes to fonts, transformations, colors, and clipping regions. The code includes logic to determine when a new line or new text state is required based on the magnitude of state changes, optimizing the output HTML structure. It also handles complex matrix transformations to map PDF coordinates to CSS-compatible font sizes and transforms.

### text.cc

- **Source Path**: `.modernpath/source/src/HTMLRenderer/text.cc`
- **Language**: text
- **Lines**: 202
- **Purpose**: To parse PDF text strings, calculate character positions and metrics, and append the resulting text data to the HTML output structure.
- **Summary**: This file implements the text rendering logic for the HTMLRenderer class, specifically the drawString method which processes raw PDF text strings. It iterates through characters, handling font-specific metrics like ascent, width, and glyph origins, while accounting for character and word spacing. The code includes logic to skip rendering for specific font types (like Type 3 or writing mode fonts) that are handled as images elsewhere. It also manages ligature decomposition, Unicode mapping, and the calculation of text displacement for accurate HTML positioning.

### HTMLState.h

- **Source Path**: `.modernpath/source/src/HTMLState.h`
- **Language**: c
- **Lines**: 83
- **Purpose**: To define the state structures required for rendering PDF content into HTML.
- **Summary**: This header file defines several structures that represent the state of the HTML output generation. 'FontInfo' holds metadata about fonts, including scaling factors for Type 3 fonts. 'HTMLTextState' tracks current text properties like font, color, and spacing. 'HTMLLineState' manages positioning and visibility checks for lines of text, and 'HTMLClipState' defines clipping boundaries.

### HTMLTextLine.cc

- **Source Path**: `.modernpath/source/src/HTMLTextLine.cc`
- **Language**: text
- **Lines**: 737
- **Purpose**: To convert PDF line data structures into optimized HTML/CSS markup.
- **Summary**: This file implements the logic for rendering a single line of text from a PDF into HTML. It manages text content, offsets, and style states, optimizing the output by merging styles and handling whitespace intelligently. The code constructs a tree of span elements based on text states and handles clipping regions to hide or show specific characters. It also manages absolute positioning and CSS transforms for the line container.

### HTMLTextLine.h

- **Source Path**: `.modernpath/source/src/HTMLTextLine.h`
- **Language**: c
- **Lines**: 135
- **Purpose**: Encapsulates the logic for converting a line of PDF text into an optimized HTML structure, managing text content, positioning, and styling states.
- **Summary**: This header defines the `HTMLTextLine` class, which is responsible for storing and optimizing a line of text destined for HTML output. It handles sequences of text characters, shifts (offsets), and state changes (like font or color) within a line. The class includes methods for appending Unicode characters, offsets, and state changes, as well as functions to optimize the line structure and dump the final HTML. It defines a nested `State` struct to manage CSS-related properties and an `Offset` struct for positioning, utilizing a `Param` object and `AllStateManager` for context.

### HTMLTextPage.cc

- **Source Path**: `.modernpath/source/src/HTMLTextPage.cc`
- **Language**: text
- **Lines**: 148
- **Purpose**: To implement the conversion and optimization of PDF text structures into HTML output.
- **Summary**: HTMLTextPage.cc implements the core logic for converting PDF page text into optimized HTML. It handles the optimization of text lines, grouping them, and managing clipping regions to ensure correct visual output. The dump_text method orchestrates the generation of HTML divs for clips and spans for text lines. It also includes placeholders for CSS dumping and further text optimization algorithms.

### HTMLTextPage.h

- **Source Path**: `.modernpath/source/src/HTMLTextPage.h`
- **Language**: c
- **Lines**: 67
- **Purpose**: To aggregate, optimize, and output text lines for a single PDF page as HTML.
- **Summary**: HTMLTextPage.h defines a class responsible for storing and optimizing a page of text converted from PDF format. It maintains a collection of HTMLTextLine objects and handles clipping regions to ensure text is rendered correctly within specific page boundaries. The class provides methods to dump the text and CSS to output streams, facilitating the generation of the final HTML representation. It coordinates with a state manager to handle text and clipping states efficiently.

### Param.h

- **Source Path**: `.modernpath/source/src/Param.h`
- **Language**: c
- **Lines**: 94
- **Purpose**: To define the data structure holding all configuration parameters for the PDF conversion process.
- **Summary**: Param.h defines a comprehensive configuration structure used to pass settings throughout the PDF to HTML conversion application. It aggregates parameters related to page ranges, rendering dimensions (DPI, zoom), output options (embedding CSS, fonts, images), font processing settings (format, hinting), text layout adjustments, background rendering, and encryption credentials. This struct acts as the primary vehicle for configuration injection into the various subsystems of the application.

### pdf2htmlEX.cc

- **Source Path**: `.modernpath/source/src/pdf2htmlEX.cc`
- **Language**: text
- **Lines**: 475
- **Purpose**: Provides the main application entry point, parses command-line arguments, configures global parameters, and initiates the PDF to HTML conversion process.
- **Summary**: This file serves as the main entry point for the pdf2htmlEX application, orchestrating the conversion of PDF documents to HTML. It initializes global parameters, parses command-line arguments using an `ArgParser`, and sets up necessary directories and configurations. The code includes functions to display usage and version information, handling dependencies like Poppler, Cairo, and Fontforge. It manages the overall workflow, including embedding options (CSS, fonts, images), page ranges, and rendering settings, before delegating the actual conversion to the `HTMLRenderer`.

### Preprocessor.cc

- **Source Path**: `.modernpath/source/src/Preprocessor.cc`
- **Language**: text
- **Lines**: 110
- **Purpose**: To scan PDF documents and map font usage to specific character codes for optimization purposes.
- **Summary**: Preprocessor.cc implements a pre-analysis phase for PDF to HTML conversion, specifically designed to scan document pages and track which character codes are used for each font. It inherits from OutputDev, suggesting it hooks into the PDF rendering library (likely Poppler) to intercept drawing operations. The class maintains a map of font IDs to character code bitmaps, allowing the system to optimize font subsetting by identifying exactly which glyphs are needed. It also calculates the maximum page dimensions encountered during the scan.

### Preprocessor.h

- **Source Path**: `.modernpath/source/src/Preprocessor.h`
- **Language**: c
- **Lines**: 67
- **Purpose**: To perform a preliminary scan of PDF documents to collect metadata (font usage, dimensions, links) required for the rendering process.
- **Summary**: The file defines a Preprocessor class that inherits from Poppler's OutputDev to perform a preliminary scan of PDF documents. It addresses the complexity of PDF structures by requiring a two-pass scan to collect font codes and link destinations. The class overrides specific virtual methods to track document state and dimensions, ensuring that the rendering engine has all necessary metadata upfront. Key design decisions include disabling text interpretation for Type 3 fonts and enforcing clipping to the crop box.

### StateManager.h

- **Source Path**: `.modernpath/source/src/StateManager.h`
- **Language**: c
- **Lines**: 442
- **Purpose**: Centralizes the management of CSS style states, ensuring unique class generation for distinct property values to optimize the final HTML/CSS output.
- **Summary**: This header defines a set of template classes and specific managers for handling CSS state generation. The `StateManager` template provides a generic mechanism to install values, assign them unique IDs, and generate corresponding CSS rules. Specializations exist for `double` (with epsilon comparison), `Matrix` (for transforms), and `Color` (with hashing). Concrete managers like `FontSizeManager`, `ColorManager`, and `TransformMatrixManager` inherit from these templates to handle specific CSS properties, defining how values are dumped to CSS streams. This system ensures that duplicate style values are not repeated in the output, reducing file size.

### StringFormatter.cc

- **Source Path**: `.modernpath/source/src/StringFormatter.cc`
- **Language**: text
- **Lines**: 31
- **Purpose**: To format strings into a dynamically sized internal buffer using printf-style syntax.
- **Summary**: This file implements the StringFormatter's function call operator, which acts as a variadic printf-style formatter. It manages an internal buffer, dynamically resizing it if the formatted string exceeds the current capacity. The implementation uses vsnprintf to ensure safety against buffer overflows. It returns a GuardedPointer object, likely to manage the lifetime or access to the formatted string buffer.

### StringFormatter.h

- **Source Path**: `.modernpath/source/src/StringFormatter.h`
- **Language**: c
- **Lines**: 44
- **Purpose**: To efficiently format strings using a reusable buffer.
- **Summary**: This header defines a string formatter class that wraps a single reusable buffer for C-style string formatting operations. It uses a guard pointer pattern to manage the lifecycle of the buffer pointer, ensuring safe access while the string is being used. The design optimizes performance by reserving buffer space and reusing it across multiple formatting calls.

### TmpFiles.cc

- **Source Path**: `.modernpath/source/src/TmpFiles.cc`
- **Language**: text
- **Lines**: 78
- **Purpose**: To provide the implementation logic for tracking, calculating size, and deleting temporary files.
- **Summary**: This source file implements the TmpFiles class methods defined in the header. It handles the actual file system interactions, including adding files to the tracking set, calculating their total size using stat, and removing them upon cleanup. The implementation respects the 'clean_tmp' flag from the Param object, skipping operations if cleanup is disabled. It also includes conditional compilation for Windows (MINGW32) support.

### TmpFiles.h

- **Source Path**: `.modernpath/source/src/TmpFiles.h`
- **Language**: c
- **Lines**: 29
- **Purpose**: To track and manage the cleanup of temporary files created during the application process.
- **Summary**: This header file defines the TmpFiles class, which acts as a registry for temporary files generated by the application. It holds references to these files and ensures they are cleaned up when the object is destroyed, depending on configuration parameters. The class interfaces with a Param object to determine behavior regarding cleaning and debug logging. It provides methods to add files to the registry and calculate the total disk space used.

### const.cc

- **Source Path**: `.modernpath/source/src/util/const.cc`
- **Language**: text
- **Lines**: 54
- **Purpose**: To define global constant mappings for font names, embedding strategies, and MIME types.
- **Summary**: This file defines global constant data structures essential for the application's configuration. It includes mappings for GB encoded font names to standard names, strategies for embedding different file types (CSS, JS, PNG) into HTML versus linking them, and MIME type associations for various font and image formats. By centralizing these constants, the code avoids magic strings and facilitates consistent configuration management across the rendering pipeline.

### const.h

- **Source Path**: `.modernpath/source/src/util/const.h`
- **Language**: c
- **Lines**: 47
- **Purpose**: To centralize global constants, mappings, and configuration structures used throughout the PDF to HTML conversion process.
- **Summary**: const.h defines a collection of global constants and mappings essential for the application's configuration and operation. It includes default DPI values, matrix definitions, and maps for handling font encodings and file embedding strategies. The file also structures how external resources like fonts and files are embedded into the output HTML versus linked externally. This centralizes configuration data to avoid magic numbers and strings throughout the codebase.

### encoding.cc

- **Source Path**: `.modernpath/source/src/util/encoding.cc`
- **Language**: text
- **Lines**: 195
- **Purpose**: Handles text encoding (UTF-8) and escaping for HTML, JSON, and attribute output.
- **Summary**: This file manages text encoding and escaping logic required for safely rendering PDF content into HTML and JSON formats. It includes a UTF-8 mapping function to convert Unicode characters to byte sequences and provides stream writers that escape special characters (like `&`, `<`, `>`) into HTML entities. It also features specific escaping functions for JSON strings and HTML attributes, including handling for backticks to prevent specific browser vulnerabilities. These functions are critical for preventing injection attacks and ensuring valid output syntax.

### encoding.h

- **Source Path**: `.modernpath/source/src/util/encoding.h`
- **Language**: c
- **Lines**: 44
- **Purpose**: To declare utility functions for text encoding and escaping in various output formats.
- **Summary**: This header file defines a set of utility functions within the pdf2htmlEX namespace for encoding and escaping text output. It includes functions to write Unicode characters to streams, escape strings for JSON compatibility, and escape strings for use within HTML tag attributes. The functions rely on C++ standard library streams and internal types for character representation.

### ffw.c

- **Source Path**: `.modernpath/source/src/util/ffw.c`
- **Language**: c
- **Lines**: 580
- **Purpose**: To implement the FontForge wrapper functionality for font processing tasks.
- **Summary**: This file implements the FontForge wrapper functions declared in ffw.h. It manages the internal state of the FontForge library, including initialization, finalization, and font view management. The implementation includes specific logic to clean up fonts for web usage, such as removing kerning, alternate unicodes, and malformed font names, as well as handling CID font metric consistency.

### ffw.h

- **Source Path**: `.modernpath/source/src/util/ffw.h`
- **Language**: c
- **Lines**: 80
- **Purpose**: To declare a C API for wrapping FontForge functionality for font processing.
- **Summary**: This header file defines the interface for a C wrapper around the FontForge library, enabling C++ code to utilize FontForge's font manipulation capabilities. It declares functions for initializing the library, loading and saving fonts, modifying encodings (including raw mappings), adjusting font metrics, and importing SVG glyphs. The use of 'extern "C"' ensures C linkage to prevent name mangling.

### math.cc

- **Source Path**: `.modernpath/source/src/util/math.cc`
- **Language**: text
- **Lines**: 91
- **Purpose**: To perform affine transformations and bounding box calculations for the rendering pipeline.
- **Summary**: This file implements low-level geometric transformations and bounding box calculations required for rendering PDF content. It handles transformation matrix operations (multiplication and point transformation) and bounding box manipulation (transformation and intersection). The logic is fundamental for mapping PDF coordinate systems to HTML/Canvas coordinates.

### math.h

- **Source Path**: `.modernpath/source/src/util/math.h`
- **Language**: c
- **Lines**: 60
- **Purpose**: To centralize mathematical logic for tolerance-based comparisons and matrix transformations.
- **Summary**: This header file defines static inline utility functions for common mathematical operations required by the rendering engine. It focuses on robust floating-point comparisons using an epsilon threshold (`EPS`) and manipulations of 2D affine transformation matrices represented as 6-element double arrays. It includes declarations for more complex geometric operations like bounding box intersection and transformation.

### mingw.cc

- **Source Path**: `.modernpath/source/src/util/mingw.cc`
- **Language**: text
- **Lines**: 65
- **Purpose**: Provides Windows/MinGW-specific implementations for file system and path utilities.
- **Summary**: This file implements Windows-specific compatibility functions for the MinGW environment, abstracting differences between Unix and Windows file systems. It provides a custom implementation of `mkdtemp` for creating temporary directories, which is standard on Unix but requires manual implementation on Windows using `mktemp` and `_mkdir`. It also defines `get_exec_dir` and `get_tmp_dir` to locate application data and temporary directories by inspecting Windows environment variables and executable paths. These functions allow the main application code to remain platform-agnostic.

### mingw.h

- **Source Path**: `.modernpath/source/src/util/mingw.h`
- **Language**: c
- **Lines**: 30
- **Purpose**: To ensure cross-platform compatibility by abstracting Windows-specific file system behaviors.
- **Summary**: This header file addresses platform-specific differences when compiling on Windows with MinGW. It provides prototypes for POSIX functions missing on Windows, such as mkdtemp, and redefines standard functions like mkdir and stat to their Windows-specific underscore-prefixed equivalents. It also declares utility functions for locating the executable and temporary directories.

### misc.cc

- **Source Path**: `.modernpath/source/src/util/misc.cc`
- **Language**: text
- **Lines**: 67
- **Purpose**: Provides miscellaneous helper functions for CSS geometry calculations and color formatting.
- **Summary**: This implementation file contains miscellaneous utility functions essential for the rendering process. It implements `css_fix_rectangle_border_width`, a function that adjusts rectangle dimensions and border widths to ensure CSS rendering rules are met, particularly handling cases where borders are thicker than the rectangle itself. Additionally, it overloads the stream output operator for the `GfxRGB` type to convert color objects into standard CSS `rgb()` string format. These utilities ensure visual fidelity and correct data formatting when generating output.

### misc.h

- **Source Path**: `.modernpath/source/src/util/misc.h`
- **Language**: c
- **Lines**: 40
- **Purpose**: To provide miscellaneous helper functions for PDF reference hashing, CSS border adjustment, and color output formatting.
- **Summary**: This header file provides utility functions and helpers for PDF to HTML conversion, specifically addressing coordinate system differences and data representation. It includes a hashing mechanism for PDF references and a helper to adjust border widths between PDF and CSS models. It also defines stream output formatting for RGB color objects.

### namespace.h

- **Source Path**: `.modernpath/source/src/util/namespace.h`
- **Language**: c
- **Lines**: 22
- **Purpose**: To import standard C++ library symbols into the current namespace to reduce verbosity in other source files.
- **Summary**: This header file defines a set of `using` declarations for frequently used standard C++ library components, such as I/O streams and string manipulators. It acts as a convenience layer to reduce boilerplate code by allowing other files to use standard types like `std::string` or `std::ifstream` without the `std::` prefix. The design decision reflects a specific coding style preference for brevity within the `pdf2htmlEX` project.

### path.cc

- **Source Path**: `.modernpath/source/src/util/path.cc`
- **Language**: text
- **Lines**: 142
- **Purpose**: To provide helper functions for file path manipulation, directory creation, and filename sanitization.
- **Summary**: This source file implements utility functions for manipulating file paths and managing the file system within the `pdf2htmlEX` namespace. It includes logic to recursively create directories, sanitize filenames by escaping format specifiers to prevent injection attacks, and identify specific file types like TrueType fonts. The implementation relies on POSIX system calls wrapped in C++ error handling logic.

### path.h

- **Source Path**: `.modernpath/source/src/util/path.h`
- **Language**: c
- **Lines**: 34
- **Purpose**: Provides utility functions for file path manipulation, directory creation, and filename sanitization.
- **Summary**: This header file defines a suite of utility functions within the `pdf2htmlEX` namespace dedicated to file path and filename management. It includes functionality to create directories, extract filenames and suffixes from paths, and specifically identify TrueType font suffixes. A key feature is the `sanitize_filename` function, which handles format specifiers in filenames to ensure safe usage. The design relies on standard C++ strings to provide cross-platform path operations.

### SignalHandler.cc

- **Source Path**: `.modernpath/source/src/util/SignalHandler.cc`
- **Language**: text
- **Lines**: 257
- **Purpose**: To handle fatal application signals by logging diagnostic details and exiting gracefully.
- **Summary**: This file implements a portable signal handler for critical errors (SIGSEGV, SIGFPE, etc.) designed to provide diagnostic information when the application crashes, particularly focusing on issues related to the FontForge library. It uses low-level I/O operations to ensure safety during re-entrant crash conditions and constructs detailed error messages containing version information, command-line arguments, and system paths. The code distinguishes between Windows and POSIX environments for signal registration and output methods.

### SignalHandler.h

- **Source Path**: `.modernpath/source/src/util/SignalHandler.h`
- **Language**: c
- **Lines**: 22
- **Purpose**: Manages system signal handling and application lifecycle actions.
- **Summary**: This header file declares the interface for setting up and managing signal handlers within the application. It exposes C-linkage functions `ffwSetAction` and `ffwClearAction` for setting and clearing specific actions, likely intended for interoperability or external callbacks. The primary function `setupSignalHandler` initializes the signal handling mechanism, passing in command-line arguments and critical directory paths (data, poppler data, temp) to the handler context. This module serves as a bridge between the application logic and OS-level signals.

### unicode.cc

- **Source Path**: `.modernpath/source/src/util/unicode.cc`
- **Language**: text
- **Lines**: 73
- **Purpose**: To map PDF character codes to safe Unicode values, avoiding conflicts with system fonts like emoji.
- **Summary**: This file implements logic for converting PDF character codes into valid Unicode strings. It specifically addresses issues with mobile Safari's emoji font usage by mapping characters to specific Private Use Area (PUA) ranges. The code attempts to resolve character names from fonts first, falling back to private mapping strategies that avoid conflicting with emoji code points (0xE000-0xE5FF).

### unicode.h

- **Source Path**: `.modernpath/source/src/util/unicode.h`
- **Language**: c
- **Lines**: 92
- **Purpose**: To validate and transform Unicode characters from PDF sources into safe HTML-compatible representations.
- **Summary**: unicode.h provides utility functions for validating and mapping Unicode characters derived from PDF fonts. It specifically identifies characters that are illegal or problematic in HTML contexts (e.g., control characters, bidirectional controls) and maps them to private use areas to prevent rendering issues. The file includes logic to extract Unicode values directly from font data and handle ligature expansions. This ensures that the generated HTML text maintains visual fidelity with the original PDF while avoiding browser-specific rendering quirks.

### basic_text.html

- **Source Path**: `.modernpath/source/test/browser_tests/basic_text/basic_text.html`
- **Language**: html
- **Lines**: 108
- **Purpose**: To provide a test fixture for validating the HTML and CSS output of basic text rendering from PDF conversion.
- **Summary**: This HTML file is a generated output from the pdf2htmlEX tool, representing a converted PDF document containing basic text. It embeds the entire base CSS framework required for rendering the PDF pages in a browser, including styles for page containers, text layers, and font definitions. The file includes embedded font data (WOFF format) to ensure visual fidelity without external dependencies. It serves as a regression test to verify that text rendering, font loading, and basic layout transformations function correctly.

### fontfile3_opentype.html

- **Source Path**: `.modernpath/source/test/browser_tests/fontfile3_opentype/fontfile3_opentype.html`
- **Language**: html
- **Lines**: 161
- **Purpose**: To validate the correct rendering of OpenType fonts converted from PDF to HTML.
- **Summary**: This HTML file is a generated test case designed to verify the rendering of OpenType fonts within the pdf2htmlEX output. It utilizes a standard CSS framework for layout and embeds specific font data via Base64 to test font loading and character display capabilities.

### geneve_1564.html

- **Source Path**: `.modernpath/source/test/browser_tests/geneve_1564/geneve_1564.html`
- **Language**: html
- **Lines**: 739
- **Purpose**: To provide a test fixture for validating PDF to HTML conversion for a specific document containing custom fonts.
- **Summary**: This HTML file is a generated output from the pdf2htmlEX tool for a specific test case named 'geneve_1564'. It contains the standard boilerplate CSS for page layout, text positioning, and print styles. The file embeds custom font definitions (ff1, ff2) using base64 encoded WOFF data, indicating a reliance on specific typefaces for accurate rendering. It serves as a regression test to ensure the conversion process handles font embedding and character mapping correctly for this specific document.

### invalid_unicode_issue477.html

- **Source Path**: `.modernpath/source/test/browser_tests/invalid_unicode_issue477/invalid_unicode_issue477.html`
- **Language**: html
- **Lines**: 159
- **Purpose**: To verify that the rendering engine correctly handles and displays invalid Unicode characters.
- **Summary**: This HTML file acts as a regression test for handling invalid Unicode characters during the PDF to HTML conversion process. It includes the standard layout CSS and embedded fonts required to render the problematic characters, ensuring the engine can handle edge cases in text encoding.

### browser_tests.py

- **Source Path**: `.modernpath/source/test/browser_tests.py`
- **Language**: python
- **Lines**: 138
- **Purpose**: To perform visual regression testing by comparing rendered HTML output against known good reference images.
- **Summary**: This script provides a base test class for performing visual regression tests on PDF-to-HTML conversions. It handles the conversion of PDFs to HTML (either by executing the tool or using pre-compiled files), rendering the HTML in a browser, capturing screenshots, and comparing them against reference images using pixel difference analysis. It includes logic for generating new reference images and reporting differences.

### svg_background_with_page_rotation_issue402.html

- **Source Path**: `.modernpath/source/test/browser_tests/svg_background_with_page_rotation_issue402/svg_background_with_page_rotation_issue402.html`
- **Language**: html
- **Lines**: 643
- **Purpose**: To test and validate the rendering of SVG backgrounds and page rotation in converted PDF documents.
- **Summary**: This HTML file is a generated output from pdf2htmlEX, specifically targeting issue #402 related to SVG backgrounds and page rotation. It includes the core CSS framework for page rendering, utilizing absolute positioning and transforms to manage layout. The file defines font faces (ff1, ff2) with embedded base64 data, ensuring the document renders with the correct typography. It validates that the rendering engine correctly preserves the visual orientation and background elements when converting rotated PDF pages to HTML.

### text_visibility.html

- **Source Path**: `.modernpath/source/test/browser_tests/text_visibility/text_visibility.html`
- **Language**: html
- **Lines**: 154
- **Purpose**: To provide a visual reference for testing the visibility and clipping of text elements in the HTML rendering engine.
- **Summary**: This HTML file is a generated test case for the pdf2htmlEX rendering engine, specifically targeting text visibility. It contains inline CSS defining the layout structure, including absolute positioning for pages and text layers, and embeds font data directly as Base64 strings to ensure rendering consistency without external dependencies.

### with_form.html

- **Source Path**: `.modernpath/source/test/browser_tests/with_form/with_form.html`
- **Language**: html
- **Lines**: 217
- **Purpose**: To validate the correct rendering and positioning of form elements converted from PDF.
- **Summary**: This HTML file is a generated test case for the rendering of PDF forms within the pdf2htmlEX output. It utilizes the standard CSS layout framework and embedded fonts to ensure that form elements are positioned and styled correctly relative to the document content.

### fancy.min.css

- **Source Path**: `.modernpath/source/test/fancy.min.css`
- **Language**: css
- **Lines**: 5
- **Purpose**: To enforce specific layout constraints on the page container during visual testing.
- **Summary**: This CSS file defines a specific style rule for the element with the ID 'page-container'. It sets the overflow property to hidden, which is likely used to prevent scrollbars from appearing during screenshot capture in the visual regression tests, ensuring pixel-perfect comparison.

### test.py

- **Source Path**: `.modernpath/source/test/old/test.py`
- **Language**: python
- **Lines**: 25
- **Purpose**: To batch convert PDF files to HTML and generate an index page for manual verification of the conversion results.
- **Summary**: This Python script automates the testing of the pdf2htmlEX conversion tool by iterating through all PDF files in a specified directory. It executes the `pdf2htmlEX` command-line tool with specific arguments (fit-width, DRM handling, external hinting) for each file and generates an index HTML file containing links to the converted outputs. The script handles errors by exiting immediately if a conversion fails, ensuring that issues are caught early. It serves as an integration test suite to verify the tool's stability across multiple inputs.

### README.md

- **Source Path**: `.modernpath/source/test/README.md`
- **Language**: markdown
- **Lines**: 125
- **Purpose**: To document the testing procedures, dependencies, and tools required to verify the correctness of PDF to HTML conversion.
- **Summary**: This file provides comprehensive documentation for the testing suite of the pdf2htmlEX application. It describes the setup and execution of Python unittests, including local and browser-based visual regression tests using Selenium and Pillow. The document details the usage of shell scripts for automation, handling test failures, and managing reference HTML generation.

### test_local_browser.py

- **Source Path**: `.modernpath/source/test/test_local_browser.py`
- **Language**: python
- **Lines**: 50
- **Purpose**: To execute visual regression tests using a local Firefox browser instance.
- **Summary**: This script implements the test suite for running visual regression tests locally using Firefox. It extends the BrowserTests base class by providing the specific setup and teardown logic for a local Selenium WebDriver. The 'generate_image' method is implemented to load HTML files via the file:// protocol and capture screenshots, ensuring the browser window meets specific size requirements before testing.

### test_output.py

- **Source Path**: `.modernpath/source/test/test_output.py`
- **Language**: python
- **Lines**: 102
- **Purpose**: To validate the file generation and naming logic of the pdf2htmlEX conversion process.
- **Summary**: This script contains a suite of unit tests designed to verify that the pdf2htmlEX application executes successfully and generates the expected output files. It tests various scenarios including single-page and multi-page PDFs, default naming conventions, user-specified filenames, and the 'split pages' feature with custom formatting. The tests focus on file existence and naming rather than the visual content of the output.

### test_remote_browser.py

- **Source Path**: `.modernpath/source/test/test_remote_browser.py`
- **Language**: python
- **Lines**: 139
- **Purpose**: To orchestrate and execute PDF rendering tests across multiple remote browser environments via Sauce Labs.
- **Summary**: This script configures and executes browser tests using the Sauce Labs remote browser service. It defines a matrix of browser configurations (OS, browser type, version) and dynamically generates test classes for each combination. The script handles Sauce Labs authentication via environment variables, sets up remote WebDriver instances, and reports test results (pass/fail status, build numbers, tags) back to the Sauce Labs service upon completion.

## Questions?

Use the ask command for AI-powered answers:

```bash
modernpath ask "How should I handle the database connection in the new system?"
```

---

*This file was generated by ModernPath CLI vdev. Regenerate with `modernpath transform sync`.*
